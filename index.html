<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, startAppial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="https://use.fontawesome.com/releases/v5.8.1/css/all.css"
      integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf"
      crossorigin="anonymous"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Open+Sans&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="stylesheet/style.css" />
    <title>Work Day Scheduler</title>
  </head>

  <body>
    <header class="jumbotron">
      <h1 class="display-3">Work Day Scheduler</h1>
      <p class="lead">A simple calendar app for scheduling your work day</p>
      <p id="currentDay" class="lead"></p>
    </header>
    <div class="container">
      <!-- Timeblocks go here -->

      <div class="time-block row no-gutters">
        <div class="col-1">
          <span class="hour"><br /><br />9 AM</span>
        </div>
        <div class="col-9">
          <textarea id="9" type="text" class="description"></textarea>
        </div>
        <div class="input-group col-2">
          <button id="btn9" class="saveBtn" type="button">
            <i class="fas fa-save fa-2x"></i>
          </button>
        </div>
      </div>

      <div class="time-block row no-gutters">
        <div class="col-1">
          <span class="hour"><br /><br />10 AM</span>
        </div>
        <div class="col-9">
          <textarea id="10" type="text" class="description"></textarea>
        </div>
        <div class="input-group col-2">
          <button id="btn10" class="saveBtn" type="button">
            <i class="fas fa-save fa-2x"></i>
          </button>
        </div>
      </div>

      <div class="time-block row no-gutters">
        <div class="col-1">
          <span class="hour"><br /><br />11 AM</span>
        </div>
        <div class="col-9">
          <textarea id="11" type="text" class="description"></textarea>
        </div>
        <div class="input-group col-2">
          <button id="btn11" class="saveBtn" type="button">
            <i class="fas fa-save fa-2x"></i>
          </button>
        </div>
      </div>

      <div class="time-block row no-gutters">
        <div class="col-1">
          <span class="hour"><br /><br />12 PM</span>
        </div>
        <div class="col-9">
          <textarea id="12" type="text" class="description"></textarea>
        </div>
        <div class="input-group col-2">
          <button id="btn12" class="saveBtn" type="button">
            <i class="fas fa-save fa-2x"></i>
          </button>
        </div>
      </div>

      <div class="time-block row no-gutters">
        <div class="col-1">
          <span class="hour"><br /><br />1 PM</span>
        </div>
        <div class="col-9">
          <textarea id="13" type="text" class="description"></textarea>
        </div>
        <div class="input-group col-2">
          <button id="btn13" class="saveBtn" type="button">
            <i class="fas fa-save fa-2x"></i>
          </button>
        </div>
      </div>

      <div class="time-block row no-gutters">
        <div class="col-1">
          <span class="hour"><br /><br />2 PM</span>
        </div>
        <div class="col-9">
          <textarea id="14" type="text" class="description"></textarea>
        </div>
        <div class="input-group col-2">
          <button id="btn14" class="saveBtn" type="button">
            <i class="fas fa-save fa-2x"></i>
          </button>
        </div>
      </div>

      <div class="time-block row no-gutters">
        <div class="col-1">
          <span class="hour"><br /><br />3 PM</span>
        </div>
        <div class="col-9">
          <textarea id="15" type="text" class="description"></textarea>
        </div>
        <div class="input-group col-2">
          <button id="btn15" class="saveBtn" type="button">
            <i class="fas fa-save fa-2x"></i>
          </button>
        </div>
      </div>

      <div class="time-block row no-gutters">
        <div class="col-1">
          <span class="hour"><br /><br />4 PM</span>
        </div>
        <div class="col-9">
          <textarea id="16" type="text" class="description"></textarea>
        </div>
        <div class="input-group col-2">
          <button id="btn16" class="saveBtn" type="button">
            <i class="fas fa-save fa-2x"></i>
          </button>
        </div>
      </div>

      <div class="time-block row no-gutters">
        <div class="col-1">
          <span class="hour"><br /><br />5 PM</span>
        </div>
        <div class="col-9">
          <textarea id="17" type="text" class="description"></textarea>
        </div>
        <div class="input-group col-2">
          <button id="btn17" class="saveBtn" type="button">
            <i class="fas fa-save fa-2x"></i>
          </button>
        </div>
      </div>

      <br /><br />
    </div>

    <script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>
    <script>
      $(document).ready(function() {
        // display current date on page top using moment.js library
        var currentDateTime = $("#currentDay");
        currentDateTime.text(moment().format("MMMM Do YYYY, h:mm a"));

        // create the text area within the container div
        var textInput = $(".container div")
          .map(function() {
            return $(this)
              .children("textarea")
              .prop("id");
          })
          .get();

        // add color to time-blocks based on the current time in moment.js library
        function showTimeColor() {
          var currentTime = parseInt(moment().format("H"));

          textInput.forEach(function(userEvent) {
            if (parseInt(userEvent) < currentTime) {
              $("#" + userEvent)
                .parent()
                .addClass("past");
            } else if (parseInt(userEvent) === currentTime) {
              $("#" + userEvent)
                .parent()
                .addClass("present");
            } else {
              $("#" + userEvent)
                .parent()
                .addClass("future");
            }
          });
        }

        // when application is opened; access local storage for any saved tasks
        function startApp() {
          textInput.forEach(function(userEvent) {
            $("#" + userEvent).text(localStorage.getItem(userEvent));
          });
        }

        // store user's newly-input tasks to local storage
        function saveUserEvent() {
          textInput.forEach(function(btnNumber) {
            $("#btn" + btnNumber).on("click", function() {
              localStorage.setItem(btnNumber, $.trim($("#" + btnNumber).val()));
            });
          });
        }

        // call functions
        startApp();

        showTimeColor();

        saveUserEvent();
      });
    </script>
  </body>
</html>
